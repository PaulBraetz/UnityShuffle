@inherits SessionChild

@if (notfier?.Data != null)
{
	<div class="rounded bg-info-t10">
		<dl>
			<dt>
				<Localize Value="@nameof(MissionEntity.Name)" />
			</dt>
			<dd>
				@notfier.Data.Name
			</dd>
			<dt>
				<Localize Value="@nameof(MissionEntity.Description)" />
			</dt>
			<dd>
				@notfier.Data.Description
			</dd>
			<dt>
				<Localize Value="@nameof(MissionEntity.Location)" />
			</dt>
			<dd>
				@notfier.Data.Location
			</dd>
			<dt>
				<Localize Value="@nameof(MissionEntity.Branches)" />
			</dt>
			<dd>
				@String.Join(", ", notfier.Data.Branches)
			</dd>
			<dt>
				<Localize Value="Average Completion Time" />
			</dt>
			<dd>
				@SessionParent.Localize(TimeSpan.FromTicks((long)notfier.Data.Ratings.Select(r=>r.TimeTaken.Ticks).Average()), "hh:mm")
			</dd>
		</dl>
	</div>
}

@code {
	[Parameter]
	public MissionEntity? Mission { get; set; }

	private INotifyStateChange<MissionEntity?>? notfier;

	protected override void OnParametersSetAndSessionInitialized()
	{
		notfier = GetNotifierFor(Mission);
	}
}